{% extends 'base.html' %}

{% block scripts %}
    <script type="text/javascript" src="{{ url_for('static', filename='js/newappointment.js') }}?ver=1.1" ></script>
{% endblock scripts %}

{% block content %}

    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3">
                <form role="form" class="form-horizontal toggle-disabled" id="new-case-form-hi-fields">
                    <h2 class="page-title new-case-form-title">Find Patient</h2>
                    <div class="clickmd-form-with-border top-25">

                        <div class="col-xs-12 col-md-5 top-5">
                            <label class="control-label">Health Card Number</label>
                            <label class="sr-only control-label" for="hin">Health Insurance Number</label>
                            <div class="item-group top-5">
                                <input type="text" name="hin" class="form-control" id="hin"
                                       placeholder="Health Insurance Number"
                                       data-toggle="tooltip" title="Health Insurance Card Number (10 Digits)"
                                       data-validation="length number"
                                       data-validation-length="10"
                                       data-validation-error-msg="Number must be 10 digits">
                            </div>
                        </div>
                        <div class="col-xs-12 col-md-7 col-lg-6 col-lg-offset-1 top-5">
                            <label class="control-label" for="ver">Version Number</label>
                            <div class="item-group top-5">
                                <div class="row">
                                    <div class="col-xs-4 col-md-3 col-lg-4">
                                        <input type="text" name="ver" value="" class="form-control" id="ver"
                                               placeholder="XX"
                                               size="2"
                                               maxlength="2"
                                               data-validation="length "
                                               data-toggle="tooltip"
                                               title="Version Number"
                                               data-validation-length="min2"
                                               data-validation-error-msg="Must be two characters"
                                               data-validation-ignore=" "
                                               data-validation-optional-if-answered="no_ver">
                                    </div>
                                    <div class="col-xs-8 col-md-9 col-lg-8">
                                        <div class="item-group checkbox">
                                            <label for="no-ver">
                                                <input type="checkbox" name="no_ver" id="no-ver"
                                                       data-validation="required"
                                                       data-validation-error-msg=" "
                                                       data-validation-optional-if-answered="ver">
                                                This card has no version number
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 top-10">
                                        <a href="http://www.health.gov.on.ca/english/providers/pub/ohip/tech_specific/pdf/8_1.pdf" target="_blank">
                                            <i class="fa fa-question-circle-o"></i>
                                            What is the Health Insurance Version Number?
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-xs-12 col-sm-12 col-md-4 col-md-offset-8 top-10">
                                <button type="submit" class="item-group btn btn-primary btn-block" name="lookup_patient" id="lookup-patient">
                                    <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                                    Lookup Patient
                                </button>
                            </div>
                        </div>
                    </div>
                </form>

                <div class="clickmd-form-with-border col-xs-12 top-25" id="patient-info-display" style="position:relative; display: none; padding:15px;">

                    <div id="no-user-found-container">
                        <div class="text-info" style="margin-bottom: 25px;">
                            <p><strong>That health card number is not currently in our database.</strong></p>
                            <p>The patient will be required to provide their personal information on the following pages.</p>
                        </div>
                    </div>
                    <div class="appointment-header">
                        <h3 id="patient-name" class="col-xs-12 col-sm-6" style="bottom: 20px;"></h3>
                        <div class="btn-toolbar ">
                            <div class="btn-group pull-right">
                                <button role="button" class="btn btn-primary item-group" id="show-patient-form">
                                    <span><i class="fa fa-user-md" aria-hidden="true"></i> Request a new appointment</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="alert alert-danger message-field" id="appointment-display-error" style="display: none;"></div>

                    <div id="patient-appointments" style="display: none;">
                        <strong>Pending Appointments</strong>
                        <div id="patient-appointment-list"></div>
                    </div>

                    <div id="patient-appointments-past" style="display: none; padding-top:20px;">
                        <strong>Past Appointments</strong>
                        <div id="patient-appointment-list-past"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>
{% endblock %}